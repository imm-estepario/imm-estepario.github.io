---
import BaseLayout from "../layouts/BaseLayout.astro";
import "../styles/glightbox.css";
import Prose from "../components/Prose.astro";
import { getImage } from "astro:assets";
import MasonryLayout from '../components/Masonry.astro';
const updatedDate = "testUpdateDate"
const publishedDate = "testPublishedDate"
const title = "Estepario";
const description = "testDescription"
const authorFullName = "Ivan Monrroy"
const author = "Ivan Monrroy"
const image = "/pictures/collection-misc-2024/03%20marzo%2024.jpg"
const alt = "testimagealt"
const positionx = "40%"
const positiony = "50%"
let baseUrl = new URL(Astro.request.url).origin;

const backgroundImage = image
  ? await getImage({
      src: image,
      alt: alt,
      width: "3840",
      height: "2160",
      decoding: "async",
      format: "avif",
    })
  : null;

const mobileBackgroundImage = image
  ? await getImage({
      src: image,
      alt: alt,
      width: "1920",
      height: "1080",
      decoding: "async",
      format: "avif",
      quality: "65",
    })
  : null;

const metaImage = image
  ? await getImage({
      src: image,
      alt: alt,
      width: "1280",
      height: "720",
      decoding: "async",
      format: "webp",
      loading: "lazy",
    })
  : null;
---

<BaseLayout
  title={title}
  image={image ? `${baseUrl}${metaImage?.src}` : ""}
  alt={alt ? metaImage?.attributes.alt : ""}
  description={description}
  author={author}
  pubDate={updatedDate}
  updatedDate={publishedDate}
  is404Page={false}
>
    <div
        id="backgroundImageElement"
        class="bg-fixed bg-center-33 bg-cover bg-no-repeat flex flex-col justify-center items-center text-center h-screen mb-8 md:-mx-16 -mx-8"
        style={`--mobile-background-image: url(${mobileBackgroundImage.src}); --background-image: url(${backgroundImage.src}); --position-x: ${positionx}; --position-y: ${positiony};`}
        data-pagefind-body
    >
    <h1 class="prose prose-slate uppercase font-overpass-mono text-[rgb(245,245,245)] text-4xl fade-in-up delay-150">
        {title}
    </h1>
    </div>

    <div data-pagefind-body>
        <Prose>
            <br>
            Fotógrafo, músico, aventurero. Amante de la naturaleza y del asombro en las pequeñas cosas. Me dejo llevar por la emoción de la vida, buscando capturar su esencia en cada imagen.
            <br><br> 
            Bienvenido a mi portafolio de fotografía, un proyecto en constante evolución y lleno de significado para mí. Aquí comparto mis obras, entrelazadas con relatos de viajes, anécdotas y reflexiones, algunas de ellas profundamente personales.
            <br><hr><br>
    <MasonryLayout images={[
        { src: "/pictures/collection-misc-2023/01 enero.jpg", alt: "hypnagogia 1" },
        { src: "/pictures/collection-misc-2023/02 febrero.jpg", alt: "hypnagogia 1" },
        { src: "/pictures/collection-misc-2023/03 marzo.jpg", alt: "hypnagogia 1" },
        { src: "/pictures/collection-misc-2023/04 abril.jpg", alt: "hypnagogia 1" },
        { src: "/pictures/collection-misc-2023/05 mayo.jpg", alt: "hypnagogia 1" },
        { src: "/pictures/collection-misc-2023/06 junio.jpg", alt: "hypnagogia 1" },
        { src: "/pictures/collection-misc-2023/07 julio.jpg", alt: "hypnagogia 1" },
        { src: "/pictures/collection-misc-2023/08 agosto.jpg", alt: "hypnagogia 1" },
        { src: "/pictures/collection-misc-2023/09 septiembre.jpg", alt: "hypnagogia 1" },
        { src: "/pictures/collection-misc-2023/10 octubre.jpg", alt: "hypnagogia 1" },
        { src: "/pictures/collection-misc-2023/11 noviembre.jpg", alt: "hypnagogia 1" },
        { src: "/pictures/collection-misc-2023/12 Diciembre.jpg", alt: "hypnagogia 1" },
        { src: "/pictures/collection-misc-2024/01 enero 24.jpg", alt: "hypnagogia 1" },
        { src: "/pictures/collection-misc-2024/02 febrero 24.jpg", alt: "hypnagogia 1" },
        { src: "/pictures/collection-misc-2024/03 marzo 24.jpg", alt: "hypnagogia 1" },
        { src: "/pictures/collection-misc-2024/04 abril 24.jpg", alt: "hypnagogia 1" },
        { src: "/pictures/collection-misc-2024/05 mayo 24.jpg", alt: "hypnagogia 1" },
        { src: "/pictures/collection-misc-2024/06 junio 24.jpg", alt: "hypnagogia 1" },
        { src: "/pictures/collection-misc-2024/07 Julio 24.jpg", alt: "hypnagogia 1" },
        { src: "/pictures/collection-misc-2024/08 agosto 24.jpg", alt: "hypnagogia 1" },
        { src: "/pictures/collection-misc-2024/09 septiembre 24.jpg", alt: "hypnagogia 1" },
        { src: "/pictures/collection-misc-2024/10 octubre 24.jpg", alt: "hypnagogia 1" },
        { src: "/pictures/collection-misc-2024/11 noviembre 24.jpg", alt: "hypnagogia 1" },
        { src: "/pictures/collection-misc-2024/12 diciembre.jpg", alt: "hypnagogia 1" },
    ]} />
      <div class="flex flex-col sm:flex-row align-center">
        <div class="w-full flex-col sm:w-1/2 text-center sm:text-left">
          <p>
            -- <a
              href={`/authors/${author}`}
              class="no-underline font-inconsolata"
            >
              {authorFullName}</a
            >
          </p>
        </div>
      </div>
    </Prose>
  </div>
</BaseLayout>
<style>
  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .fade-in {
    opacity: 0;
    animation: fadeIn 1s ease-out forwards;
  }

  .fade-in-up {
    opacity: 0;
    animation: fadeInUp 1s ease-out forwards;
  }

  .delay-300 {
    animation-delay: 300ms;
  }

  .delay-600 {
    animation-delay: 600ms;
  }

  #backgroundImageElement {
    background-image: var(--mobile-background-image);
    background-position: var(--position-x, 45%) var(--position-y, 50%);
    opacity: 0;
    animation: fadeIn 1s ease-out forwards;
  }

  @media (min-width: 800px) {
    #backgroundImageElement {
      background-image: var(--background-image);
      background-position: var(--position-x, 30%) var(--position-y, 50%);
    }
  }
</style>
